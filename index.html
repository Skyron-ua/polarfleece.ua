<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Skyron.ua — Теплий чоловічий костюм</title>
  <meta name="description" content="Skyron.ua — теплий флісовий чоловічий костюм. Швидка відправка Новою Поштою." />
  <link rel="stylesheet" href="style.css" />

  <!-- TikTok Pixel Code Start -->
  <script>
  !function (w, d, t) {
    w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};
    for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);
    ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e};
    ttq.load=function(e,n){var r="https://analytics.tiktok.com/i18n/pixel/events.js",o=n&&n.partner;ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=r,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};n=document.createElement("script");
    n.type="text/javascript",n.async=!0,n.src=r+"?sdkid="+e+"&lib="+t;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s)
    };
    ttq.load('D4OBCO3C77U7MI8IQKIG');
    ttq.page();
  }(window, document, 'ttq');
  </script>
  <!-- TikTok Pixel Code End -->

</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="#">Skyron.ua</a>
      <nav class="nav">
        <a href="#advantages">Переваги</a>
        <a href="#catalog">Каталог</a>
        <a href="#order" class="btn btn-small" onclick="ttq.track('ClickButton')">Замовити</a>
      </nav>
      <a class="support-phone" href="tel:+380733337278">+380 73 333 72 78</a>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="container hero-grid">
        <div class="hero-left">
          <h1 class="hero-title">Теплий чоловічий костюм</h1>
          <p class="lead">Плотний фліс, преміальний крій — підходить і для вулиці, і для дому.</p>

          <div class="price-block">
            <div class="countdown">
              <span class="count-label">Знижка діє ще:</span>
              <div id="timer" class="timer">00:59:59</div>
            </div>
            <div class="price" id="priceValue">999 грн</div>
          </div>

          <ul class="features-list">
            <li>Плотний фліс — тепло до −10°C</li>
            <li>Анатомічна посадка — розміри S–XXL</li>
            <li>Швидка відправка Новою Поштою (1–3 дні)</li>
          </ul>

          <div class="hero-cta">
            <a class="btn btn-primary" href="#order" onclick="ttq.track('ClickButton')">Купити зараз</a>
            <a class="btn btn-outline" id="btnPreview" href="#catalog" onclick="ttq.track('ClickButton')">Подивитись кольори</a>
          </div>
        </div>

        <div class="hero-right">
          <div class="product-frame" aria-live="polite">
            <div class="img-wrap">
              <img src="images/1_1080x1350.jpg" alt="Фото товару" id="mainImage">
            </div>

            <div class="carousel-controls" id="carouselControls" aria-hidden="true">
              <button id="prevImg" title="Назад" aria-label="Попереднє фото">‹</button>
              <button id="nextImg" title="Вперед" aria-label="Наступне фото">›</button>
            </div>

            <div class="carousel-counter" id="carouselCounter" style="display:none" aria-hidden="true">1 / 1</div>

            <div class="swatches" id="swatches" role="list" aria-label="Колір товару"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Advantages -->
    <section id="advantages" class="section-light">
      <div class="container">
        <h2>Чому обирають PolarFleece</h2>
        <div class="advantages-grid">
          <div class="adv">
            <h3>Матеріали</h3>
            <p>Преміальний фліс, не втрачає форму та колір після прання.</p>
          </div>
          <div class="adv">
            <h3>Крой</h3>
            <p>Анатомічна посадка — зручно під час руху, виглядає стильно.</p>
          </div>
          <div class="adv">
            <h3>Гарантія</h3>
            <p>14 днів на повернення — обмін або повернення, якщо товар у новому стані з бирками.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Catalog -->
    <section id="catalog" class="container">
      <h2>Каталог — популярні кольори</h2>
      <p class="muted">Натисни на колір, щоб змінити фото та переглянути варіант.</p>
      <div class="catalog-grid" id="catalogGrid" aria-live="polite"></div>
    </section>

    <!-- Order -->
    <section id="order" class="container order-section">
      <div class="order-grid">
        <div class="order-left">
          <h2>Оформити замовлення</h2>
          <p class="muted">Заповни форму — ми зв'яжемося найближчим часом. Також можна зв'язатися через Telegram або Viber.</p>

          <form id="orderForm" class="form" autocomplete="off" novalidate>
            <label>Ім'я та прізвище
              <input type="text" name="fullname" id="fullname" required placeholder="Іван Іванов">
            </label>

            <label>Телефон
              <input type="tel" name="phone" id="phone" required placeholder="+380XXXXXXXXX" inputmode="tel">
            </label>

            <div class="form-row">
              <label style="flex:1">Укажіть зріст (см)
                <input type="number" id="height" name="height" min="100" max="250" placeholder="175" required>
              </label>

              <label style="flex:1">Укажіть вагу (кг)
                <input type="number" id="weight" name="weight" min="30" max="200" placeholder="78" required>
              </label>
            </div>

            <label>Колір
              <select name="color" id="colorSelect" required>
                <option value="">Оберіть колір</option>
              </select>
            </label>

            <label>Адреса (Місто, відділення НП)
              <input type="text" id="address" name="address" placeholder="Київ, відд. №" required>
            </label>

            <label>Кількість
              <input type="number" id="qty" name="qty" min="1" value="1" required>
            </label>

            <fieldset class="payment-options" aria-label="Оплата">
              <legend>Варіанти оплати</legend>
              <label><input type="radio" name="prepay" value="full" id="prepayFull" checked> Повна передоплата (економія на комісії Нової Пошти)</label>
              <label><input type="radio" name="prepay" value="min" id="prepayMin"> Мінімальна передоплата — 100 грн (входить у вартість товару)</label>
            </fieldset>

            <label class="checkbox">
              <input type="checkbox" id="agree" required>
              Підтверджую, що ознайомлений з умовами доставки та повернення.
            </label>

            <div class="form-actions">
              <button type="submit" id="btnSubmitOrder" class="btn btn-order">Відправити замовлення (в Telegram)</button>
              <button type="button" id="btnConsultTG" class="btn btn-telegram">Консультація в Telegram</button>
              <button type="button" id="btnConsultViber" class="btn btn-viber">Консультація в Viber</button>
            </div>

            <p class="note small" style="margin-top:10px">
              Мінімальна передоплата <strong>100 грн</strong> включається у вартість замовлення.
            </p>

            <div id="formResult" class="form-result" aria-live="polite"></div>
          </form>
        </div>

        <aside class="order-right">
          <div class="summary-card">
            <h3>Ваша корзина</h3>
            <p id="summaryProduct">Костюм — <span id="summaryColor">—</span></p>
            <p>Ім'я: <span id="summaryName">—</span></p>
            <p>Зріст: <span id="summaryHeight">—</span> см</p>
            <p>Вага: <span id="summaryWeight">—</span> кг</p>
            <p class="big">До оплати: <strong id="summaryTotal">0 грн</strong></p>
            <p class="muted small">Доставка: Нова Пошта (1–3 дні). Вартість доставки після підтвердження замовлення.</p>
            <ul class="guarantees">
              <li>Повна оплата або відправка з мінімальною передоплатою</li>
              <li>Повернення 14 днів (товар не повинен бути пошкоджений, збережені бирки)</li>
              <li>Підтримка: <a href="tel:+380733337278" id="supportPhone">+380 73 333 72 78</a></li>
            </ul>
          </div>
        </aside>
      </div>
    </section>

    <footer class="site-footer">
      <div class="container footer-grid">
        <div>
          <h4>Skyron.ua</h4>
          <p>Теплий костюм — швидко, акуратно, надійно. © <span id="year"></span></p>
        </div>
        <div>
          <h4>Контакти</h4>
          <p>Telegram: <a id="tgLink" href="https://t.me/Skyron_ua" target="_blank" rel="noopener">@Skyron_ua</a></p>
          <p>Viber: <a id="viberLink" href="#" target="_blank" rel="noopener">Viber спільнота</a></p>
          <p>Підтримка: <a href="tel:+380733337278">+380 73 333 72 78</a></p>
        </div>
        <div>
          <h4>Доставка</h4>
          <p>Нова Пошта — 1–3 дні.</p>
        </div>
      </div>
    </footer>
  </main>

  <!-- All JS in one place -->
  <script>
  /* ========== CONFIG ========== */
  const CONFIG = {
    PRICE: 999,
    PRODUCT_NAME: "PolarFleece — чоловічий костюм",
    CONTACT: {
      TG_USERNAME: "Skyron_ua",
      VIBER_INVITE: "https://invite.viber.com/?g2=AQBeex4BIEUJJlW4bdj1yeAO7w846m1dQ6AzkdYO2N%2Bt6FAv7rl5TWDkjrKKKt7t",
      SUPPORT_PHONE: "+380733337278"
    },
    COLORS: [
      { id: "black", name: "Чорний", hex: "#0b0b0b", images: ["images/1.png","images/2.png"], price: 999 },
      { id: "anthracite", name: "Антрацит", hex: "#616267", images: ["images/10.png","images/11.png"], price: 999 },
      { id: "beige", name: "Беж", hex: "#d6c7b1", images: ["images/20.png","images/21.png"], price: 999 },
      { id: "emerald", name: "Смарагд", hex: "#00a86b", images: ["images/50.png"], price: 999 }
    ],
    DELIVERY_TEXT: "Доставка: Нова Пошта, 1–3 дні"
  };

  /* ---------- helpers ---------- */
  const $ = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));
  const encode = s => encodeURIComponent(s);

  /* ---------- init ---------- */
  document.addEventListener("DOMContentLoaded", () => {
    if ($("#year")) $("#year").textContent = new Date().getFullYear();
    if ($("#priceValue")) $("#priceValue").textContent = `${CONFIG.PRICE} грн`;
    if ($("#supportPhone")) {
      $("#supportPhone").textContent = CONFIG.CONTACT.SUPPORT_PHONE.replace(/^(\+?)/, '+');
      $("#supportPhone").href = `tel:${CONFIG.CONTACT.SUPPORT_PHONE}`;
    }

    const swatches = $("#swatches");
    const catalogGrid = $("#catalogGrid");
    const colorSelect = $("#colorSelect");

    // build swatches / catalog / select
    CONFIG.COLORS.forEach((c, i) => {
      // swatch
      const sw = document.createElement("button");
      sw.className = "swatch";
      sw.style.background = c.hex;
      sw.dataset.id = c.id;
      sw.title = c.name;
      if (i === 0) sw.classList.add("active");
      swatches && swatches.appendChild(sw);

      // catalog card
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${c.images[0]}" alt="${c.name}">
        <div class="meta">
          <div class="name">${CONFIG.PRODUCT_NAME}</div>
          <div class="price">${c.price} грн</div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="color:var(--muted);font-size:13px">${c.name}</div>
          <button class="btn btn-small btn-primary" data-color="${c.id}" onclick="ttq.track('ClickButton')">Вибрати</button>
        </div>
      `;
      catalogGrid && catalogGrid.appendChild(card);

      // select option
      if (colorSelect) {
        const opt = document.createElement("option");
        opt.value = c.id;
        opt.textContent = c.name;
        colorSelect.appendChild(opt);
      }
    });

    setupSwatches();
    bindCatalogButtons();
    selectColor(CONFIG.COLORS[0].id);
    setupForm();
    startCountdown(60 * 59);

    // footer links
    if ($("#tgLink")) $("#tgLink").href = `https://t.me/${CONFIG.CONTACT.TG_USERNAME}`;
    if ($("#viberLink")) $("#viberLink").href = CONFIG.CONTACT.VIBER_INVITE;

    // consultation buttons: open CLEAN chat / invite link + track Contact
    $("#btnConsultTG")?.addEventListener("click", () => {
      try { ttq.track && ttq.track('Contact'); } catch(e){}
      const url = `https://t.me/${CONFIG.CONTACT.TG_USERNAME}`;
      window.open(url, "_blank");
    });

    $("#btnConsultViber")?.addEventListener("click", () => {
      try { ttq.track && ttq.track('Contact'); } catch(e){}
      window.open(CONFIG.CONTACT.VIBER_INVITE, "_blank");
    });
  });

  /* ---------- color & carousel ---------- */
  let activeImages = [];
  let currentIndex = 0;

  function selectColor(id) {
    const color = CONFIG.COLORS.find(c => c.id === id);
    if (!color) return;

    $$(".swatch").forEach(s => s.classList.toggle("active", s.dataset.id === id));

    activeImages = Array.isArray(color.images) && color.images.length ? color.images.slice() : ["images/placeholder_1080x1350.jpg"];
    currentIndex = 0;
    updateMainImage();

    if ($("#summaryColor")) $("#summaryColor").textContent = color.name;
    if ($("#priceValue")) $("#priceValue").textContent = `${color.price} грн`;
    if ($("#colorSelect")) $("#colorSelect").value = id;

    updateCarouselUI();
    updateSummary();
  }

  function updateMainImage() {
    const main = $("#mainImage");
    if (!main) return;
    main.src = activeImages[currentIndex];
    const color = CONFIG.COLORS.find(c => c.images && c.images.includes(activeImages[currentIndex]));
    main.alt = color ? color.name : CONFIG.PRODUCT_NAME;
    updateCarouselCounter();
  }

  function updateCarouselUI() {
    const controls = $("#carouselControls");
    const counter = $("#carouselCounter");
    if (!activeImages || activeImages.length <= 1) {
      if (controls) controls.style.display = "none";
      if (counter) counter.style.display = "none";
    } else {
      if (controls) controls.style.display = "flex";
      if (counter) counter.style.display = "block";
    }
    updateCarouselCounter();
  }

  function updateCarouselCounter(){
    const counter = $("#carouselCounter");
    if(!counter) return;
    counter.textContent = `${currentIndex + 1} / ${activeImages.length}`;
  }

  document.getElementById("nextImg")?.addEventListener("click", () => {
    if (!activeImages || activeImages.length === 0) return;
    currentIndex = (currentIndex + 1) % activeImages.length;
    updateMainImage();
  });
  document.getElementById("prevImg")?.addEventListener("click", () => {
    if (!activeImages || activeImages.length === 0) return;
    currentIndex = (currentIndex - 1 + activeImages.length) % activeImages.length;
    updateMainImage();
  });

  function setupSwatches() {
    $$(".swatch").forEach(s => {
      s.addEventListener("click", () => {
        try { ttq.track && ttq.track('ClickButton'); } catch(e){}
        selectColor(s.dataset.id);
      });
    });
  }

  function bindCatalogButtons() {
    $$("#catalogGrid .btn-primary").forEach(btn => {
      btn.addEventListener("click", () => {
        selectColor(btn.dataset.color);
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    });
  }

  /* ---------- form ---------- */
  function setupForm() {
    const form = $("#orderForm");
    if (!form) return;

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const data = gatherForm();
      if (!data) return;

      const prepay = document.querySelector('input[name="prepay"]:checked')?.value === 'full'
        ? 'Повна передоплата (економія на комісії)'
        : 'Мінімальна передоплата — 100 грн (входить у вартість)';

      const lines = [
        `Замовлення: ${CONFIG.PRODUCT_NAME}`,
        `Колір: ${data.colorName}`,
        `Зріст: ${data.height} см`,
        `Вага: ${data.weight} кг`,
        `Кількість: ${data.qty}`,
        `Оплата: ${prepay}`,
        `Ім'я: ${data.fullname}`,
        `Телефон: ${data.phone}`,
        `Адреса: ${data.address}`,
        CONFIG.DELIVERY_TEXT
      ];
      const text = encode(lines.join("\n"));
      const tgUrl = `https://t.me/${CONFIG.CONTACT.TG_USERNAME}?text=${text}`;

      // Track Lead BEFORE opening Telegram
      try {
        if (typeof ttq !== 'undefined' && ttq.track) {
          ttq.track('Lead', { value: CONFIG.PRICE * data.qty, currency: 'UAH' });
        }
      } catch (err) { console.warn('ttq.track error', err); }

      window.open(tgUrl, "_blank");

      const res = $("#formResult");
      if (res) {
        res.textContent = "Заявка підготовлена — відкриваємо Telegram. Підтвердіть відправку у вікні Telegram.";
        setTimeout(() => res.textContent = "", 7000);
      }
    });

    // live update summary
    const fullname = $("#fullname");
    const height = $("#height");
    const weight = $("#weight");
    const qty = $("#qty");
    const colorSelect = $("#colorSelect");

    [fullname, height, weight, qty, colorSelect].forEach(el => {
      if (!el) return;
      el.addEventListener("input", updateSummary);
      el.addEventListener("change", updateSummary);
    });
  }

  function gatherForm() {
    const fullname = ($("#fullname") && $("#fullname").value.trim()) || "";
    const phone = ($("#phone") && $("#phone").value.trim()) || "";
    const height = ($("#height") && $("#height").value.trim()) || "";
    const weight = ($("#weight") && $("#weight").value.trim()) || "";
    const qty = Number($("#qty") && $("#qty").value) || 1;
    const address = ($("#address") && $("#address").value.trim()) || "";
    const colorId = ($("#colorSelect") && $("#colorSelect").value) || "";

    if (!fullname || !phone || !height || !weight || !address || !colorId) {
      alert("Будь ласка, заповніть усі обов'язкові поля.");
      return null;
    }

    const color = CONFIG.COLORS.find(c => c.id === colorId) || { name: "—" };
    return { fullname, phone, height, weight, qty, address, colorName: color.name };
  }

  function updateSummary() {
    const qty = Number($("#qty") && $("#qty").value) || 1;
    const fullname = ($("#fullname") && $("#fullname").value) || "—";
    const height = ($("#height") && $("#height").value) || "—";
    const weight = ($("#weight") && $("#weight").value) || "—";
    const colorName = ($("#colorSelect") && $("#colorSelect").selectedOptions[0] && $("#colorSelect").selectedOptions[0].textContent) || "—";

    $("#summaryName") && ($("#summaryName").textContent = fullname);
    $("#summaryHeight") && ($("#summaryHeight").textContent = height);
    $("#summaryWeight") && ($("#summaryWeight").textContent = weight);
    $("#summaryColor") && ($("#summaryColor").textContent = colorName);
    $("#summaryTotal") && ($("#summaryTotal").textContent = `${CONFIG.PRICE * qty} грн`);
  }

  /* ---------- timer ---------- */
  function startCountdown(seconds) {
    const el = $("#timer");
    if (!el) return;
    let s = Number(seconds) || 0;

    function tick() {
      if (s <= 0) {
        el.textContent = "00:00:00";
        return;
      }
      const hh = String(Math.floor(s / 3600)).padStart(2, "0");
      const mm = String(Math.floor((s % 3600) / 60)).padStart(2, "0");
      const ss = String(s % 60).padStart(2, "0");
      el.textContent = `${hh}:${mm}:${ss}`;
      s = s - 1;
    }

    tick();
    const id = setInterval(() => {
      if (s <= 0) {
        clearInterval(id);
        tick();
      } else {
        tick();
      }
    }, 1000);
  }
  </script>
</body>
</html>